{"version":3,"sources":["components/UI/Input/index.js","components/UI/Modal/index.js","helpers/linearCategories.js","views/newpage/NewPage/index.js"],"names":["Input","props","input","type","Group","label","Label","className","value","onChange","placeholder","options","length","map","option","index","name","Control","Text","errorMessage","NewModal","size","show","onHide","handleClose","btnTitle","Header","closeButton","Title","modalTitle","Body","children","Footer","buttons","btn","variant","color","onClick","handleSubmit","linearCategories","categories","category","push","_id","parentId","Page","useSelector","state","page","useState","createModal","setCreateModal","title","setTitle","desc","setDesc","setType","setCategories","categoryId","setCategoryId","banners","setBanners","products","setProducts","dispatch","useDispatch","useEffect","loading","onCategoryChange","e","find","cate","target","handleBannerImages","files","handleProductImages","submitPageForm","form","FormData","alert","append","forEach","banner","product","createPageAction","style","margin","Container","Row","Col","rows","Button"],"mappings":"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","file":"static/js/36.c32b74a9.chunk.js","sourcesContent":["import React from 'react';\nimport { Form } from 'react-bootstrap';\n\nexport default function Input(props) {\n\tlet input = null;\n\n\tswitch (props.type) {\n\t\tcase 'select':\n\t\t\tinput = (\n\t\t\t\t<Form.Group>\n\t\t\t\t\t{props.label && <Form.Label>{props.label}</Form.Label>}\n\t\t\t\t\t<select className=\"form-control\" value={props.value} onChange={props.onChange}>\n\t\t\t\t\t\t<option value=\"\">{props.placeholder}</option>\n\t\t\t\t\t\t{props.options.length > 0 ? (\n\t\t\t\t\t\t\tprops.options.map((option, index) => (\n\t\t\t\t\t\t\t\t<option key={index} value={option.value}>\n\t\t\t\t\t\t\t\t\t{option.name}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</select>\n\t\t\t\t</Form.Group>\n\t\t\t);\n\n\t\t\tbreak;\n\t\tcase 'text':\n\t\tdefault:\n\t\t\tinput = (\n\t\t\t\t<Form.Group>\n\t\t\t\t\t{props.label && <Form.Label>{props.label}</Form.Label>}\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\ttype={props.type}\n\t\t\t\t\t\tplaceholder={props.placeholder}\n\t\t\t\t\t\tvalue={props.value}\n\t\t\t\t\t\tonChange={props.onChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<Form.Text className=\"text-muted\">{props.errorMessage}</Form.Text>\n\t\t\t\t</Form.Group>\n\t\t\t);\n\t}\n\n\treturn input;\n}\n","import React from 'react';\nimport { Button, Modal } from 'react-bootstrap';\n\nexport default function NewModal(props) {\n\treturn (\n\t\t<Modal  size={props.size} show={props.show} onHide={props.handleClose} btnTitle={props.btnTitle}>\n\t\t\t<Modal.Header closeButton>\n\t\t\t\t<Modal.Title>{props.modalTitle}</Modal.Title>\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Body>{props.children}</Modal.Body>\n\t\t\t<Modal.Footer>\n\t\t\t\t{props.buttons ? (\n\t\t\t\t\tprops.buttons.map((btn, index) => (\n\t\t\t\t\t\t<Button key={index} variant={btn.color} onClick={btn.onClick}>\n\t\t\t\t\t\t\t{btn.label}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t))\n\t\t\t\t) : (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Button variant=\"secondary\" onClick={props.handleClose}>\n\t\t\t\t\t\t\tAnnuler\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button className=\"infoButton\" onClick={props.handleSubmit}>\n\t\t\t\t\t\t\t{props.btnTitle ? props.btnTitle : 'Sauvegarder' }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n}\n","const linearCategories = (categories, options = []) => {\n\tfor (let category of categories) {\n\t\toptions.push({\n\t\t\tvalue: category._id,\n\t\t\tname: category.name,\n\t\t\tparentId: category.parentId,\n\t\t\ttype: category.type\n\t\t});\n\t\tif (category.children.length > 0) {\n\t\t\tlinearCategories(category.children, options);\n\t\t}\n\t}\n\treturn options;\n};\n\nexport default linearCategories;\n","import React, { useEffect, useState } from 'react';\nimport { Button, Col, Container, Row } from 'react-bootstrap';\nimport { MdAddCircle } from 'react-icons/md';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { createPageAction } from 'src/actions';\nimport Input from '../../../components/UI/Input';\nimport NewModal from '../../../components/UI/Modal';\nimport linearCategories from '../../../helpers/linearCategories';\nimport './style.css';\n\nexport default function Page(props) {\n\tconst category = useSelector((state) => state.category);\n\tconst page = useSelector((state) => state.page);\n\tconst [ createModal, setCreateModal ] = useState(false);\n\tconst [ title, setTitle ] = useState('');\n\tconst [ desc, setDesc ] = useState('');\n\tconst [ type, setType ] = useState('');\n\tconst [ categories, setCategories ] = useState([]);\n\tconst [ categoryId, setCategoryId ] = useState('');\n\tconst [ banners, setBanners ] = useState([]);\n\tconst [ products, setProducts ] = useState([]);\n\n\tconst dispatch = useDispatch();\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetCategories(linearCategories(category.categories));\n\t\t},\n\t\t[ category ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\t// console.log(page);\n\t\t\tif (!page.loading) {\n\t\t\t\tsetCreateModal(false);\n\t\t\t\tsetTitle('');\n\t\t\t\tsetType('');\n\t\t\t\tsetCategoryId('');\n\t\t\t\tsetBanners([]);\n\t\t\t\tsetProducts([]);\n\t\t\t\tsetDesc('');\n\t\t\t}\n\t\t},\n\t\t[ page ]\n\t);\n\n\tconst onCategoryChange = (e) => {\n\t\t// console.log(e.target.value);\n\t\tconst category = categories.find((cate) => cate.value === e.target.value);\n\t\tsetCategoryId(e.target.value);\n\t\tsetType(category.type);\n\t\t// console.log(category);\n\t};\n\n\tconst handleBannerImages = (e) => {\n\t\tsetBanners([ ...banners, e.target.files[0] ]);\n\t};\n\tconst handleProductImages = (e) => {\n\t\tsetProducts([ ...products, e.target.files[0] ]);\n\t};\n\n\tconst submitPageForm = (e) => {\n\t\tconst form = new FormData();\n\n\t\tif (title === '') {\n\t\t\talert('Titre et Description sont réquis');\n\t\t\tsetCreateModal(false);\n\t\t\treturn;\n\t\t}\n\n\t\tform.append('title', title);\n\t\tform.append('description', desc);\n\t\tform.append('category', categoryId);\n\t\tform.append('type', type);\n\t\tbanners.forEach((banner, index) => {\n\t\t\tform.append('banners', banner);\n\t\t});\n\t\tproducts.forEach((product, index) => {\n\t\t\tform.append('products', product);\n\t\t});\n\t\t// console.log({ title, desc, categoryId, type, banners, products });\n\t\tdispatch(createPageAction(form));\n\t};\n\n\tconst renderCreatePageModal = () => {\n\t\treturn (\n\t\t\t<NewModal\n\t\t\t\tsize=\"lg\"\n\t\t\t\tshow={createModal}\n\t\t\t\tmodalTitle={'Créer une Nouvelle Page'}\n\t\t\t\thandleClose={(e) => setCreateModal(false)}\n\t\t\t\thandleSubmit={submitPageForm}\n\t\t\t>\n\t\t\t\t<Container>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t<p>Cate&#769;gorie de Page</p>\n\t\t\t\t\t\t\t{/* <select className=\"form-control\" value={cateName} onChange={onCategoryChange}>\n\t\t\t\t\t\t\t\t<option>Select Category</option>\n\t\t\t\t\t\t\t\t{categories.map((cat) => <option key={cat._id}>{cat.name}</option>)}\n\t\t\t\t\t\t\t</select> */}\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t\t\tvalue={categoryId}\n\t\t\t\t\t\t\t\tonChange={onCategoryChange}\n\t\t\t\t\t\t\t\toptions={categories}\n\t\t\t\t\t\t\t\tplaceholder=\"Se&#769;lectionner Cate&#769;gorie de la Page\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<br />\n\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tlabel={'Titre de Page'}\n\t\t\t\t\t\t\t\tvalue={title}\n\t\t\t\t\t\t\t\tonChange={(e) => setTitle(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder={'Ajouter Titre de la Page'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<br />\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t<p>Description de la Page</p>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\trows=\"4\"\n\t\t\t\t\t\t\t\tvalue={desc}\n\t\t\t\t\t\t\t\tonChange={(e) => setDesc(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder={'Ajouter une Description'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\n\t\t\t\t\t<div className=\"listImagesContainer\">\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<p>Se&#769;lectionner Bande&#769;role Publicitaire</p>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t{banners.length > 0 ? (\n\t\t\t\t\t\t\t\tbanners.map((banner, index) => (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Row className=\"listImages\" key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<Col>{banner.name}</Col>\n\t\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\t\tname=\"banners\"\n\t\t\t\t\t\t\t\t\tonChange={handleBannerImages}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"listImagesContainer\">\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<p>Se&#769;lectionner Images pour la Page</p>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t{products.length > 0 ? (\n\t\t\t\t\t\t\t\tproducts.map((product, index) => (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Row className=\"listImages\" key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<Col>{product.name}</Col>\n\t\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\t\tname=\"products\"\n\t\t\t\t\t\t\t\t\tonChange={handleProductImages}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</div>\n\t\t\t\t</Container>\n\t\t\t</NewModal>\n\t\t);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<h1  style={{ margin: '3rem', color: 'white' }}>Cre&#769;er une nouvelle page</h1>\n\t\t\t{renderCreatePageModal()}\n\n\t\t\t<Button variant=\"success\" className=\"addButton\" onClick={() => setCreateModal(true)}><MdAddCircle /> Cre&#769;er une Page</Button>\n\t\t\t{props.children}\n\t\t</>\n\t);\n}\n"],"sourceRoot":""}
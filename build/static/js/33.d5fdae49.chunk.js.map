{"version":3,"sources":["views/products/AllProducts/index.js"],"names":["AllProduct","category","useSelector","state","product","useDispatch","useState","setShow","categoryList","renderCategories","categories","options","push","name","children","length","productsByCategory","arr","result","Map","forEach","elem","item","get","value","products","set","Array","from","values","createProducts","productCategories","prod","map","cate","renderProducts","am4core","am4themes_animated","networkSeries","am4plugins_forceDirected","series","data","dataFields","linkWith","id","nodes","template","tooltipText","fillOpacity","label","text","fontSize","maxLevels","maxRadius","manyBodyStrength","hideOversized","truncate","useEffect","loading","Fragment","xs","style","background","borderRadius","md","display","justifyContent","marginBottom","margin","color"],"mappings":"gRAqJeA,UA7II,WAClB,IAAMC,EAAWC,aAAY,SAACC,GAAD,OAAWA,EAAMF,YACxCG,EAAUF,aAAY,SAACC,GAAD,OAAWA,EAAMC,WAFrB,GAGPC,cACSC,oBAAS,IAJX,mBAIVC,GAJU,WAkBlBC,EAZmB,SAAnBC,EAAoBC,GAA8B,IAAD,EAAjBC,EAAiB,uDAAP,GAAO,cACjCD,GADiC,IACtD,2BAAiC,CAAC,IAAzBT,EAAwB,QAChCU,EAAQC,KAAK,CACZC,KAAMZ,EAASY,OAEZZ,EAASa,SAASC,OAAS,GAC9BN,EAAiBR,EAASa,SAAUH,IANgB,8BAStD,OAAOA,EAGaF,CAAiBR,EAASS,YAuDzCM,EAdiB,WAAe,IAAdC,EAAa,uDAAP,GACvBC,EAAS,IAAIC,IAUnB,OATAF,EAAIG,SAAQ,SAAAC,GACX,IAAIC,EAAOJ,EAAOK,IAAIF,EAAKpB,WAAa,CAAEA,SAAUoB,EAAKpB,SAAUuB,MAAO,EAAGC,SAAU,IACvFH,EAAKE,QACLF,EAAKG,SAASb,KAAK,CAClBY,MAAO,EACPX,KAAMQ,EAAKI,WAEZP,EAAOQ,IAAIJ,EAAKrB,SAAUqB,MAEpBK,MAAMC,KAAKV,EAAOW,UAGCC,CAnDJ,SAACL,GAA4B,IAAD,EAC9CM,EAAoB,GAD0B,cAEjCN,GAFiC,yBAEzCO,EAFyC,QAGjDxB,EAAayB,KAAI,SAACC,GACbA,EAAKrB,MAAQmB,EAAK/B,SAASY,MAC9BkB,EAAkBnB,KAAK,CACtBX,SAAUiC,EAAKrB,KACfW,MAAO,EACPC,SAAUO,EAAK/B,SAASY,MAAQqB,EAAKrB,KAAO,CAAEmB,EAAKnB,MAAS,SANhE,2BAA4B,IAFsB,8BAalD,OAAOkB,EAGYI,CAAe/B,EAAQqB,WAuC3CW,IAAiBC,KAGjB,IAGIC,EAHQF,IAAe,WAAYG,KAGbC,OAAO5B,KAAK,IAAI2B,KAiC1C,OA/BAD,EAAcG,KAAd,YAAyBzB,GAEzBsB,EAAcI,WAAWC,SAAW,WACpCL,EAAcI,WAAW7B,KAAO,WAChCyB,EAAcI,WAAWE,GAAK,WAC9BN,EAAcI,WAAWlB,MAAQ,QACjCc,EAAcI,WAAW5B,SAAW,WAEpCwB,EAAcO,MAAMC,SAASC,YAAc,SAC3CT,EAAcO,MAAMC,SAASE,YAAc,EAG3CV,EAAcO,MAAMC,SAASG,MAAMC,KAAO,SAC1CZ,EAAca,SAAW,GACzBb,EAAcc,UAAY,EAC1Bd,EAAce,UAAYjB,IAAgB,GAC1CE,EAAcgB,kBAAoB,GAClChB,EAAcO,MAAMC,SAASG,MAAMM,eAAgB,EACnDjB,EAAcO,MAAMC,SAASG,MAAMO,UAAW,EAE9CC,qBACC,WACMxD,EAASyD,SACbnD,GAAQ,KAGV,CAAEN,EAASyD,UAMX,cAAC,IAAMC,SAAP,UACC,cAAC,IAAD,UACC,cAAC,IAAD,CAAMC,GAAG,KAAT,SACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAMC,MAAO,CAAEC,WAAY,UAAWC,aAAc,OAApD,SACC,cAAC,IAAD,CAAMC,GAAI,GAAV,SACC,qBAAKH,MAAO,CAAEI,QAAS,OAAQC,eAAgB,gBAAiBC,aAAc,QAA9E,SACC,oBAAIN,MAAO,CAAEO,OAAQ,OAAQC,MAAO,QAApC,qCAKH,cAAC,IAAD,UACC,cAAC,IAAD,CAAML,GAAI,GAAV,SACC,qBAAKpB,GAAG,4B","file":"static/js/33.d5fdae49.chunk.js","sourcesContent":["import * as am4core from '@amcharts/amcharts4/core';\nimport * as am4plugins_forceDirected from '@amcharts/amcharts4/plugins/forceDirected';\nimport am4themes_animated from '@amcharts/amcharts4/themes/animated';\nimport { CCard, CCol, CRow } from '@coreui/react';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './chart.css';\n\nconst AllProduct = () => {\n\tconst category = useSelector((state) => state.category);\n\tconst product = useSelector((state) => state.product);\n\tconst dispatch = useDispatch();\n\tconst [ show, setShow ] = useState(true);\n\n\tconst renderCategories = (categories, options = []) => {\n\t\tfor (let category of categories) {\n\t\t\toptions.push({\n\t\t\t\tname: category.name,\n\t\t\t});\n\t\t\tif (category.children.length > 0) {\n\t\t\t\trenderCategories(category.children, options);\n\t\t\t}\n\t\t}\n\t\treturn options;\n\t};\n\n\tconst categoryList = renderCategories(category.categories);\n\n\t// console.log({ categoryList });\n\n\tconst renderProducts = (products, options = []) => {\n\t\tlet productCategories = [];\n\t\tfor (let prod of products) {\n\t\t\tcategoryList.map((cate) => {\n\t\t\t\tif (cate.name == prod.category.name) {\n\t\t\t\t\tproductCategories.push({\n\t\t\t\t\t\tcategory: cate.name,\n\t\t\t\t\t\tvalue: 1,\n\t\t\t\t\t\tproducts: prod.category.name == cate.name ? [ prod.name ] : []\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn productCategories;\n\t};\n\n\tconst productList = renderProducts(product.products);\n\n\t// console.log({ productList });\n\n\n\n\n// const createProducts = (arr = []) => {\n// \t\treturn productList.reduce((acc, val, ind) => {\n// \t\t\tconst index = acc.findIndex(elem => elem.category === val.category);\n\n// \t\t\tif (index !== -1) {\n// \t\t\t\tconst key = Object.keys(val)[1];\n// \t\t\t\tacc[index][key] = val[key];\n// \t\t\t} else {\n// \t\t\t\tacc.push(val);\n// \t\t\t};\n// \t\t\treturn acc;\n// \t\t}, [])\n// }\n\t\n\tconst createProducts = (arr = []) => {\n\t\tconst result = new Map();\n\t\tarr.forEach(elem => {\n\t\t\tlet item = result.get(elem.category) || { category: elem.category, value: 7, products: [] };\n\t\t\titem.value++;\n\t\t\titem.products.push({\t\t\t\t\n\t\t\t\tvalue: 5,\n\t\t\t\tname: elem.products\t\t\t\n\t\t\t});\n\t\t\tresult.set(item.category, item);\n\t\t})\n\t\treturn Array.from(result.values());\n\t}\n\t\n\tconst productsByCategory = createProducts(productList);\n\n\t// console.log({ productsByCategory });\n\n\tam4core.useTheme(am4themes_animated);\n\t// Themes end\n\n\tlet chart = am4core.create('chartdiv', am4plugins_forceDirected.ForceDirectedTree);\n\t// chart.legend = new am4charts.Legend();\n\n\tlet networkSeries = chart.series.push(new am4plugins_forceDirected.ForceDirectedSeries());\n\n\tnetworkSeries.data = [...productsByCategory];\n\n\tnetworkSeries.dataFields.linkWith = 'linkWith';\n\tnetworkSeries.dataFields.name = 'category';\n\tnetworkSeries.dataFields.id = 'category';\n\tnetworkSeries.dataFields.value = 'value';\n\tnetworkSeries.dataFields.children = 'products';\n\n\tnetworkSeries.nodes.template.tooltipText = '{name}';\n\tnetworkSeries.nodes.template.fillOpacity = 1;\n\n\n\tnetworkSeries.nodes.template.label.text = '{name}';\n\tnetworkSeries.fontSize = 12;\n\tnetworkSeries.maxLevels = 4;\n\tnetworkSeries.maxRadius = am4core.percent(6);\n\tnetworkSeries.manyBodyStrength = -16;\n\tnetworkSeries.nodes.template.label.hideOversized = true;\n\tnetworkSeries.nodes.template.label.truncate = true;\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (!category.loading) {\n\t\t\t\tsetShow(false);\n\t\t\t}\n\t\t},\n\t\t[ category.loading ]\n\t);\n\n\t// console.log({ categoryList });\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<CRow>\n\t\t\t\t<CCol xs=\"12\">\n\t\t\t\t\t<CCard>\n\t\t\t\t\t\t<CRow style={{ background: '#67dcbb', borderRadius: '5px' }}>\n\t\t\t\t\t\t\t<CCol md={12}>\n\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '15px' }}>\n\t\t\t\t\t\t\t\t\t<h1 style={{ margin: '1rem', color: '#333' }}>Tous les Produits</h1>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</CCol>\n\t\t\t\t\t\t</CRow>\n\n\t\t\t\t\t\t<CRow>\n\t\t\t\t\t\t\t<CCol md={12}>\n\t\t\t\t\t\t\t\t<div id=\"chartdiv\" />\n\t\t\t\t\t\t\t</CCol>\n\t\t\t\t\t\t</CRow>\n\t\t\t\t\t</CCard>\n\t\t\t\t</CCol>\n\t\t\t</CRow>\n\t\t</React.Fragment>\n\t);\n};\n\nexport default AllProduct;\n"],"sourceRoot":""}
{"version":3,"sources":["views/products/AllProducts/index.js"],"names":["AllProduct","category","useSelector","state","product","useState","setShow","categoryList","renderCategories","categories","options","push","name","children","length","productsByCategory","arr","result","Map","forEach","elem","item","get","value","products","set","Array","from","values","createProductList","productCategories","prod","map","cate","renderProducts","am4core","am4themes_animated","networkSeries","am4plugins_forceDirected","series","data","dataFields","linkWith","id","nodes","template","tooltipText","fillOpacity","label","text","fontSize","maxLevels","maxRadius","manyBodyStrength","hideOversized","truncate","useEffect","loading","Fragment","xs","style","background","borderRadius","md","display","justifyContent","marginBottom","margin","color"],"mappings":"gRAoJeA,UA5II,WAClB,IAAMC,EAAWC,aAAY,SAACC,GAAD,OAAWA,EAAMF,YACxCG,EAAUF,aAAY,SAACC,GAAD,OAAWA,EAAMC,WAC7C,EAA0BC,oBAAS,GAAnC,mBAAcC,GAAd,WAcMC,EAZmB,SAAnBC,EAAoBC,GAA8B,IAAD,EAAjBC,EAAiB,uDAAP,GAAO,cACjCD,GADiC,IACtD,2BAAiC,CAAC,IAAzBR,EAAwB,QAChCS,EAAQC,KAAK,CACZC,KAAMX,EAASW,OAEZX,EAASY,SAASC,OAAS,GAC9BN,EAAiBP,EAASY,SAAUH,IANgB,8BAStD,OAAOA,EAGaF,CAAiBP,EAASQ,YAuDzCM,EAdoB,WAAe,IAAdC,EAAa,uDAAP,GAC1BC,EAAS,IAAIC,IAUnB,OATAF,EAAIG,SAAQ,SAAAC,GACX,IAAIC,EAAOJ,EAAOK,IAAIF,EAAKnB,WAAa,CAAEA,SAAUmB,EAAKnB,SAAUsB,MAAO,EAAGC,SAAU,IACvFH,EAAKE,QACLF,EAAKG,SAASb,KAAK,CAClBY,MAAO,EACPX,KAAMQ,EAAKI,WAEZP,EAAOQ,IAAIJ,EAAKpB,SAAUoB,MAEpBK,MAAMC,KAAKV,EAAOW,UAGCC,CAnDJ,SAACL,GAA4B,IAAD,EAC9CM,EAAoB,GAD0B,cAEjCN,GAFiC,yBAEzCO,EAFyC,QAGjDxB,EAAayB,KAAI,SAACC,GACbA,EAAKrB,OAASmB,EAAK9B,SAASW,MAC/BkB,EAAkBnB,KAAK,CACtBV,SAAUgC,EAAKrB,KACfW,MAAO,EACPC,SAAUO,EAAK9B,SAASW,OAASqB,EAAKrB,KAAO,CAAEmB,EAAKnB,MAAS,SANjE,2BAA4B,IAFsB,8BAalD,OAAOkB,EAGYI,CAAe9B,EAAQoB,WAuC3CW,IAAiBC,KAGjB,IAGIC,EAHQF,IAAe,WAAYG,KAGbC,OAAO5B,KAAK,IAAI2B,KAiC1C,OA/BAD,EAAcG,KAAd,YAAyBzB,GAEzBsB,EAAcI,WAAWC,SAAW,WACpCL,EAAcI,WAAW7B,KAAO,WAChCyB,EAAcI,WAAWE,GAAK,WAC9BN,EAAcI,WAAWlB,MAAQ,QACjCc,EAAcI,WAAW5B,SAAW,WAEpCwB,EAAcO,MAAMC,SAASC,YAAc,SAC3CT,EAAcO,MAAMC,SAASE,YAAc,EAG3CV,EAAcO,MAAMC,SAASG,MAAMC,KAAO,SAC1CZ,EAAca,SAAW,GACzBb,EAAcc,UAAY,EAC1Bd,EAAce,UAAYjB,IAAgB,GAC1CE,EAAcgB,kBAAoB,GAClChB,EAAcO,MAAMC,SAASG,MAAMM,eAAgB,EACnDjB,EAAcO,MAAMC,SAASG,MAAMO,UAAW,EAE9CC,qBACC,WACMvD,EAASwD,SACbnD,GAAQ,KAGV,CAAEL,EAASwD,UAMX,cAAC,IAAMC,SAAP,UACC,cAAC,IAAD,UACC,cAAC,IAAD,CAAMC,GAAG,KAAT,SACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAMC,MAAO,CAAEC,WAAY,UAAWC,aAAc,OAApD,SACC,cAAC,IAAD,CAAMC,GAAI,GAAV,SACC,qBAAKH,MAAO,CAAEI,QAAS,OAAQC,eAAgB,gBAAiBC,aAAc,QAA9E,SACC,oBAAIN,MAAO,CAAEO,OAAQ,OAAQC,MAAO,QAApC,qCAKH,cAAC,IAAD,UACC,cAAC,IAAD,CAAML,GAAI,GAAV,SACC,qBAAKpB,GAAG,4B","file":"static/js/43.c471e8ee.chunk.js","sourcesContent":["import * as am4core from '@amcharts/amcharts4/core';\r\nimport * as am4plugins_forceDirected from '@amcharts/amcharts4/plugins/forceDirected';\r\nimport am4themes_animated from '@amcharts/amcharts4/themes/animated';\r\nimport { CCard, CCol, CRow } from '@coreui/react';\r\nimport React, { useEffect, useState } from 'react';\r\nimport {  useSelector } from 'react-redux';\r\nimport './chart.css';\r\n\r\nconst AllProduct = () => {\r\n\tconst category = useSelector((state) => state.category);\r\n\tconst product = useSelector((state) => state.product);\r\n\tconst [ show, setShow ] = useState(true);\r\n\r\n\tconst renderCategories = (categories, options = []) => {\r\n\t\tfor (let category of categories) {\r\n\t\t\toptions.push({\r\n\t\t\t\tname: category.name,\r\n\t\t\t});\r\n\t\t\tif (category.children.length > 0) {\r\n\t\t\t\trenderCategories(category.children, options);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn options;\r\n\t};\r\n\r\n\tconst categoryList = renderCategories(category.categories);\r\n\r\n\t// console.log({ categoryList });\r\n\r\n\tconst renderProducts = (products, options = []) => {\r\n\t\tlet productCategories = [];\r\n\t\tfor (let prod of products) {\r\n\t\t\tcategoryList.map((cate) => {\r\n\t\t\t\tif (cate.name === prod.category.name) {\r\n\t\t\t\t\tproductCategories.push({\r\n\t\t\t\t\t\tcategory: cate.name,\r\n\t\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\t\tproducts: prod.category.name === cate.name ? [ prod.name ] : []\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn productCategories;\r\n\t};\r\n\r\n\tconst productList = renderProducts(product.products);\r\n\r\n\t// console.log({ productList });\r\n\r\n\r\n\r\n\r\n// const createProducts = (arr = []) => {\r\n// \t\treturn productList.reduce((acc, val, ind) => {\r\n// \t\t\tconst index = acc.findIndex(elem => elem.category === val.category);\r\n\r\n// \t\t\tif (index !== -1) {\r\n// \t\t\t\tconst key = Object.keys(val)[1];\r\n// \t\t\t\tacc[index][key] = val[key];\r\n// \t\t\t} else {\r\n// \t\t\t\tacc.push(val);\r\n// \t\t\t};\r\n// \t\t\treturn acc;\r\n// \t\t}, [])\r\n// }\r\n\t\r\n\tconst createProductList = (arr = []) => {\r\n\t\tconst result = new Map();\r\n\t\tarr.forEach(elem => {\r\n\t\t\tlet item = result.get(elem.category) || { category: elem.category, value: 7, products: [] };\r\n\t\t\titem.value++;\r\n\t\t\titem.products.push({\t\t\t\t\r\n\t\t\t\tvalue: 5,\r\n\t\t\t\tname: elem.products\t\t\t\r\n\t\t\t});\r\n\t\t\tresult.set(item.category, item);\r\n\t\t})\r\n\t\treturn Array.from(result.values());\r\n\t}\r\n\t\r\n\tconst productsByCategory = createProductList(productList);\r\n\r\n\t// console.log({ productsByCategory });\r\n\r\n\tam4core.useTheme(am4themes_animated);\r\n\t// Themes end\r\n\r\n\tlet chart = am4core.create('chartdiv', am4plugins_forceDirected.ForceDirectedTree);\r\n\t// chart.legend = new am4charts.Legend();\r\n\r\n\tlet networkSeries = chart.series.push(new am4plugins_forceDirected.ForceDirectedSeries());\r\n\r\n\tnetworkSeries.data = [...productsByCategory];\r\n\r\n\tnetworkSeries.dataFields.linkWith = 'linkWith';\r\n\tnetworkSeries.dataFields.name = 'category';\r\n\tnetworkSeries.dataFields.id = 'category';\r\n\tnetworkSeries.dataFields.value = 'value';\r\n\tnetworkSeries.dataFields.children = 'products';\r\n\r\n\tnetworkSeries.nodes.template.tooltipText = '{name}';\r\n\tnetworkSeries.nodes.template.fillOpacity = 1;\r\n\r\n\r\n\tnetworkSeries.nodes.template.label.text = '{name}';\r\n\tnetworkSeries.fontSize = 12;\r\n\tnetworkSeries.maxLevels = 4;\r\n\tnetworkSeries.maxRadius = am4core.percent(6);\r\n\tnetworkSeries.manyBodyStrength = -16;\r\n\tnetworkSeries.nodes.template.label.hideOversized = true;\r\n\tnetworkSeries.nodes.template.label.truncate = true;\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (!category.loading) {\r\n\t\t\t\tsetShow(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ category.loading ]\r\n\t);\r\n\r\n\t// console.log({ categoryList });\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<CRow>\r\n\t\t\t\t<CCol xs=\"12\">\r\n\t\t\t\t\t<CCard>\r\n\t\t\t\t\t\t<CRow style={{ background: '#67dcbb', borderRadius: '5px' }}>\r\n\t\t\t\t\t\t\t<CCol md={12}>\r\n\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '15px' }}>\r\n\t\t\t\t\t\t\t\t\t<h1 style={{ margin: '1rem', color: '#333' }}>Tous les Produits</h1>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</CCol>\r\n\t\t\t\t\t\t</CRow>\r\n\r\n\t\t\t\t\t\t<CRow>\r\n\t\t\t\t\t\t\t<CCol md={12}>\r\n\t\t\t\t\t\t\t\t<div id=\"chartdiv\" />\r\n\t\t\t\t\t\t\t</CCol>\r\n\t\t\t\t\t\t</CRow>\r\n\t\t\t\t\t</CCard>\r\n\t\t\t\t</CCol>\r\n\t\t\t</CRow>\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default AllProduct;\r\n"],"sourceRoot":""}
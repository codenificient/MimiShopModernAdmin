{"version":3,"sources":["views/products/AllProducts/index.js"],"names":["AllProduct","category","useSelector","state","product","useState","setShow","categoryList","renderCategories","categories","productsByCategory","arr","result","Map","forEach","elem","item","get","value","products","push","name","set","Array","from","values","createProductList","productCategories","prod","map","cate","renderProducts","am4core","am4themes_animated","networkSeries","am4plugins_forceDirected","series","data","dataFields","linkWith","id","children","nodes","template","tooltipText","fillOpacity","label","text","fontSize","maxLevels","maxRadius","manyBodyStrength","hideOversized","truncate","useEffect","loading","Fragment","xs","style","background","borderRadius","md","display","justifyContent","marginBottom","margin","color"],"mappings":"wRAqIeA,UA5HI,WAClB,IAAMC,EAAWC,aAAY,SAACC,GAAD,OAAWA,EAAMF,YACxCG,EAAUF,aAAY,SAACC,GAAD,OAAWA,EAAMC,WAC7C,EAA0BC,oBAAS,GAAnC,mBAAcC,GAAd,WAEMC,EAAeC,YAAiBP,EAASQ,YAoDzCC,EAdoB,WAAe,IAAdC,EAAa,uDAAP,GAC1BC,EAAS,IAAIC,IAUnB,OATAF,EAAIG,SAAQ,SAACC,GACZ,IAAIC,EAAOJ,EAAOK,IAAIF,EAAKd,WAAa,CAAEA,SAAUc,EAAKd,SAAUiB,MAAO,EAAGC,SAAU,IACvFH,EAAKE,QACLF,EAAKG,SAASC,KAAK,CAClBF,MAAO,EACPG,KAAMN,EAAKI,WAEZP,EAAOU,IAAIN,EAAKf,SAAUe,MAEpBO,MAAMC,KAAKZ,EAAOa,UAGCC,CAhDJ,SAACP,GAA4B,IAAD,EAC9CQ,EAAoB,GAD0B,cAEjCR,GAFiC,yBAEzCS,EAFyC,QAGjDrB,EAAasB,KAAI,SAACC,GACbA,EAAKT,OAASO,EAAK3B,SAASoB,MAC/BM,EAAkBP,KAAK,CACtBnB,SAAU6B,EAAKT,KACfH,MAAO,EACPC,SAAUS,EAAK3B,SAASoB,OAASS,EAAKT,KAAO,CAAEO,EAAKP,MAAS,SANjE,2BAA4B,IAFsB,8BAalD,OAAOM,EAGYI,CAAe3B,EAAQe,WAoC3Ca,IAAiBC,KAGjB,IAGIC,EAHQF,IAAe,WAAYG,KAGbC,OAAOhB,KAAK,IAAIe,KAgC1C,OA9BAD,EAAcG,KAAd,YAA0B3B,GAE1BwB,EAAcI,WAAWC,SAAW,WACpCL,EAAcI,WAAWjB,KAAO,WAChCa,EAAcI,WAAWE,GAAK,WAC9BN,EAAcI,WAAWpB,MAAQ,QACjCgB,EAAcI,WAAWG,SAAW,WAEpCP,EAAcQ,MAAMC,SAASC,YAAc,SAC3CV,EAAcQ,MAAMC,SAASE,YAAc,EAE3CX,EAAcQ,MAAMC,SAASG,MAAMC,KAAO,SAC1Cb,EAAcc,SAAW,GACzBd,EAAce,UAAY,EAC1Bf,EAAcgB,UAAYlB,IAAgB,GAC1CE,EAAciB,kBAAoB,GAClCjB,EAAcQ,MAAMC,SAASG,MAAMM,eAAgB,EACnDlB,EAAcQ,MAAMC,SAASG,MAAMO,UAAW,EAE9CC,qBACC,WACMrD,EAASsD,SACbjD,GAAQ,KAGV,CAAEL,EAASsD,UAMX,cAAC,IAAMC,SAAP,UACC,cAAC,IAAD,UACC,cAAC,IAAD,CAAMC,GAAG,KAAT,SACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAMC,MAAO,CAAEC,WAAY,UAAWC,aAAc,OAApD,SACC,cAAC,IAAD,CAAMC,GAAI,GAAV,SACC,qBAAKH,MAAO,CAAEI,QAAS,OAAQC,eAAgB,gBAAiBC,aAAc,QAA9E,SACC,oBAAIN,MAAO,CAAEO,OAAQ,OAAQC,MAAO,QAApC,iDAKH,cAAC,IAAD,UACC,cAAC,IAAD,CAAML,GAAI,GAAV,SACC,qBAAKrB,GAAG,4B","file":"static/js/44.b9c48ec7.chunk.js","sourcesContent":["import * as am4core from '@amcharts/amcharts4/core';\nimport * as am4plugins_forceDirected from '@amcharts/amcharts4/plugins/forceDirected';\nimport am4themes_animated from '@amcharts/amcharts4/themes/animated';\nimport { CCard, CCol, CRow } from '@coreui/react';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { renderCategories } from 'src/urlConfig';\nimport './chart.css';\n\nconst AllProduct = () => {\n\tconst category = useSelector((state) => state.category);\n\tconst product = useSelector((state) => state.product);\n\tconst [ show, setShow ] = useState(true);\n\n\tconst categoryList = renderCategories(category.categories);\n\n\t// console.log({ categoryList });\n\n\tconst renderProducts = (products, options = []) => {\n\t\tlet productCategories = [];\n\t\tfor (let prod of products) {\n\t\t\tcategoryList.map((cate) => {\n\t\t\t\tif (cate.name === prod.category.name) {\n\t\t\t\t\tproductCategories.push({\n\t\t\t\t\t\tcategory: cate.name,\n\t\t\t\t\t\tvalue: 1,\n\t\t\t\t\t\tproducts: prod.category.name === cate.name ? [ prod.name ] : []\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn productCategories;\n\t};\n\n\tconst productList = renderProducts(product.products);\n\n\t// console.log({ productList });\n\n\t// const createProducts = (arr = []) => {\n\t// \t\treturn productList.reduce((acc, val, ind) => {\n\t// \t\t\tconst index = acc.findIndex(elem => elem.category === val.category);\n\n\t// \t\t\tif (index !== -1) {\n\t// \t\t\t\tconst key = Object.keys(val)[1];\n\t// \t\t\t\tacc[index][key] = val[key];\n\t// \t\t\t} else {\n\t// \t\t\t\tacc.push(val);\n\t// \t\t\t};\n\t// \t\t\treturn acc;\n\t// \t\t}, [])\n\t// }\n\n\tconst createProductList = (arr = []) => {\n\t\tconst result = new Map();\n\t\tarr.forEach((elem) => {\n\t\t\tlet item = result.get(elem.category) || { category: elem.category, value: 7, products: [] };\n\t\t\titem.value++;\n\t\t\titem.products.push({\n\t\t\t\tvalue: 5,\n\t\t\t\tname: elem.products\n\t\t\t});\n\t\t\tresult.set(item.category, item);\n\t\t});\n\t\treturn Array.from(result.values());\n\t};\n\n\tconst productsByCategory = createProductList(productList);\n\n\t// console.log({ productsByCategory });\n\n\tam4core.useTheme(am4themes_animated);\n\t// Themes end\n\n\tlet chart = am4core.create('chartdiv', am4plugins_forceDirected.ForceDirectedTree);\n\t// chart.legend = new am4charts.Legend();\n\n\tlet networkSeries = chart.series.push(new am4plugins_forceDirected.ForceDirectedSeries());\n\n\tnetworkSeries.data = [ ...productsByCategory ];\n\n\tnetworkSeries.dataFields.linkWith = 'linkWith';\n\tnetworkSeries.dataFields.name = 'category';\n\tnetworkSeries.dataFields.id = 'category';\n\tnetworkSeries.dataFields.value = 'value';\n\tnetworkSeries.dataFields.children = 'products';\n\n\tnetworkSeries.nodes.template.tooltipText = '{name}';\n\tnetworkSeries.nodes.template.fillOpacity = 1;\n\n\tnetworkSeries.nodes.template.label.text = '{name}';\n\tnetworkSeries.fontSize = 12;\n\tnetworkSeries.maxLevels = 4;\n\tnetworkSeries.maxRadius = am4core.percent(6);\n\tnetworkSeries.manyBodyStrength = -16;\n\tnetworkSeries.nodes.template.label.hideOversized = true;\n\tnetworkSeries.nodes.template.label.truncate = true;\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (!category.loading) {\n\t\t\t\tsetShow(false);\n\t\t\t}\n\t\t},\n\t\t[ category.loading ]\n\t);\n\n\t// console.log({ categoryList });\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<CRow>\n\t\t\t\t<CCol xs=\"12\">\n\t\t\t\t\t<CCard>\n\t\t\t\t\t\t<CRow style={{ background: '#67dcbb', borderRadius: '5px' }}>\n\t\t\t\t\t\t\t<CCol md={12}>\n\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '15px' }}>\n\t\t\t\t\t\t\t\t\t<h1 style={{ margin: '1rem', color: '#333' }}>Tous les Produits Disponibles</h1>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</CCol>\n\t\t\t\t\t\t</CRow>\n\n\t\t\t\t\t\t<CRow>\n\t\t\t\t\t\t\t<CCol md={12}>\n\t\t\t\t\t\t\t\t<div id=\"chartdiv\" />\n\t\t\t\t\t\t\t</CCol>\n\t\t\t\t\t\t</CRow>\n\t\t\t\t\t</CCard>\n\t\t\t\t</CCol>\n\t\t\t</CRow>\n\t\t</React.Fragment>\n\t);\n};\n\nexport default AllProduct;\n"],"sourceRoot":""}
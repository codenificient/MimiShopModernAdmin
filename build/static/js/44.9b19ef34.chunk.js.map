{"version":3,"sources":["views/products/AllProducts/index.js"],"names":["AllProduct","category","useSelector","state","product","useState","setShow","categoryList","renderCategories","categories","productsByCategory","arr","result","Map","forEach","elem","item","get","value","products","push","name","set","Array","from","values","createProductList","productCategories","prod","map","cate","renderProducts","am4core","am4themes_animated","networkSeries","am4plugins_forceDirected","series","data","dataFields","linkWith","id","children","nodes","template","tooltipText","fillOpacity","label","text","fontSize","maxLevels","maxRadius","manyBodyStrength","hideOversized","truncate","useEffect","loading","Fragment","xs","style","background","borderRadius","md","display","justifyContent","marginBottom","margin","color"],"mappings":"wRAqIeA,UA5HI,WAClB,IAAMC,EAAWC,aAAY,SAACC,GAAD,OAAWA,EAAMF,YACxCG,EAAUF,aAAY,SAACC,GAAD,OAAWA,EAAMC,WAC7C,EAA0BC,oBAAS,GAAnC,mBAAcC,GAAd,WAEMC,EAAeC,YAAiBP,EAASQ,YAoDzCC,EAdoB,WAAe,IAAdC,EAAa,uDAAP,GAC1BC,EAAS,IAAIC,IAUnB,OATAF,EAAIG,SAAQ,SAACC,GACZ,IAAIC,EAAOJ,EAAOK,IAAIF,EAAKd,WAAa,CAAEA,SAAUc,EAAKd,SAAUiB,MAAO,EAAGC,SAAU,IACvFH,EAAKE,QACLF,EAAKG,SAASC,KAAK,CAClBF,MAAO,EACPG,KAAMN,EAAKI,WAEZP,EAAOU,IAAIN,EAAKf,SAAUe,MAEpBO,MAAMC,KAAKZ,EAAOa,UAGCC,CAhDJ,SAACP,GAA4B,IAAD,EAC9CQ,EAAoB,GAD0B,cAEjCR,GAFiC,yBAEzCS,EAFyC,QAGjDrB,EAAasB,KAAI,SAACC,GACbA,EAAKT,OAASO,EAAK3B,SAASoB,MAC/BM,EAAkBP,KAAK,CACtBnB,SAAU6B,EAAKT,KACfH,MAAO,EACPC,SAAUS,EAAK3B,SAASoB,OAASS,EAAKT,KAAO,CAAEO,EAAKP,MAAS,SANjE,2BAA4B,IAFsB,8BAalD,OAAOM,EAGYI,CAAe3B,EAAQe,WAoC3Ca,IAAiBC,KAGjB,IAGIC,EAHQF,IAAe,WAAYG,KAGbC,OAAOhB,KAAK,IAAIe,KAgC1C,OA9BAD,EAAcG,KAAd,YAA0B3B,GAE1BwB,EAAcI,WAAWC,SAAW,WACpCL,EAAcI,WAAWjB,KAAO,WAChCa,EAAcI,WAAWE,GAAK,WAC9BN,EAAcI,WAAWpB,MAAQ,QACjCgB,EAAcI,WAAWG,SAAW,WAEpCP,EAAcQ,MAAMC,SAASC,YAAc,SAC3CV,EAAcQ,MAAMC,SAASE,YAAc,EAE3CX,EAAcQ,MAAMC,SAASG,MAAMC,KAAO,SAC1Cb,EAAcc,SAAW,GACzBd,EAAce,UAAY,EAC1Bf,EAAcgB,UAAYlB,IAAgB,GAC1CE,EAAciB,kBAAoB,GAClCjB,EAAcQ,MAAMC,SAASG,MAAMM,eAAgB,EACnDlB,EAAcQ,MAAMC,SAASG,MAAMO,UAAW,EAE9CC,qBACC,WACMrD,EAASsD,SACbjD,GAAQ,KAGV,CAAEL,EAASsD,UAMX,cAAC,IAAMC,SAAP,UACC,cAAC,IAAD,UACC,cAAC,IAAD,CAAMC,GAAG,KAAT,SACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAMC,MAAO,CAAEC,WAAY,UAAWC,aAAc,OAApD,SACC,cAAC,IAAD,CAAMC,GAAI,GAAV,SACC,qBAAKH,MAAO,CAAEI,QAAS,OAAQC,eAAgB,gBAAiBC,aAAc,QAA9E,SACC,oBAAIN,MAAO,CAAEO,OAAQ,OAAQC,MAAO,QAApC,iDAKH,cAAC,IAAD,UACC,cAAC,IAAD,CAAML,GAAI,GAAV,SACC,qBAAKrB,GAAG,4B","file":"static/js/44.9b19ef34.chunk.js","sourcesContent":["import * as am4core from '@amcharts/amcharts4/core';\r\nimport * as am4plugins_forceDirected from '@amcharts/amcharts4/plugins/forceDirected';\r\nimport am4themes_animated from '@amcharts/amcharts4/themes/animated';\r\nimport { CCard, CCol, CRow } from '@coreui/react';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { renderCategories } from 'src/urlConfig';\r\nimport './chart.css';\r\n\r\nconst AllProduct = () => {\r\n\tconst category = useSelector((state) => state.category);\r\n\tconst product = useSelector((state) => state.product);\r\n\tconst [ show, setShow ] = useState(true);\r\n\r\n\tconst categoryList = renderCategories(category.categories);\r\n\r\n\t// console.log({ categoryList });\r\n\r\n\tconst renderProducts = (products, options = []) => {\r\n\t\tlet productCategories = [];\r\n\t\tfor (let prod of products) {\r\n\t\t\tcategoryList.map((cate) => {\r\n\t\t\t\tif (cate.name === prod.category.name) {\r\n\t\t\t\t\tproductCategories.push({\r\n\t\t\t\t\t\tcategory: cate.name,\r\n\t\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\t\tproducts: prod.category.name === cate.name ? [ prod.name ] : []\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn productCategories;\r\n\t};\r\n\r\n\tconst productList = renderProducts(product.products);\r\n\r\n\t// console.log({ productList });\r\n\r\n\t// const createProducts = (arr = []) => {\r\n\t// \t\treturn productList.reduce((acc, val, ind) => {\r\n\t// \t\t\tconst index = acc.findIndex(elem => elem.category === val.category);\r\n\r\n\t// \t\t\tif (index !== -1) {\r\n\t// \t\t\t\tconst key = Object.keys(val)[1];\r\n\t// \t\t\t\tacc[index][key] = val[key];\r\n\t// \t\t\t} else {\r\n\t// \t\t\t\tacc.push(val);\r\n\t// \t\t\t};\r\n\t// \t\t\treturn acc;\r\n\t// \t\t}, [])\r\n\t// }\r\n\r\n\tconst createProductList = (arr = []) => {\r\n\t\tconst result = new Map();\r\n\t\tarr.forEach((elem) => {\r\n\t\t\tlet item = result.get(elem.category) || { category: elem.category, value: 7, products: [] };\r\n\t\t\titem.value++;\r\n\t\t\titem.products.push({\r\n\t\t\t\tvalue: 5,\r\n\t\t\t\tname: elem.products\r\n\t\t\t});\r\n\t\t\tresult.set(item.category, item);\r\n\t\t});\r\n\t\treturn Array.from(result.values());\r\n\t};\r\n\r\n\tconst productsByCategory = createProductList(productList);\r\n\r\n\t// console.log({ productsByCategory });\r\n\r\n\tam4core.useTheme(am4themes_animated);\r\n\t// Themes end\r\n\r\n\tlet chart = am4core.create('chartdiv', am4plugins_forceDirected.ForceDirectedTree);\r\n\t// chart.legend = new am4charts.Legend();\r\n\r\n\tlet networkSeries = chart.series.push(new am4plugins_forceDirected.ForceDirectedSeries());\r\n\r\n\tnetworkSeries.data = [ ...productsByCategory ];\r\n\r\n\tnetworkSeries.dataFields.linkWith = 'linkWith';\r\n\tnetworkSeries.dataFields.name = 'category';\r\n\tnetworkSeries.dataFields.id = 'category';\r\n\tnetworkSeries.dataFields.value = 'value';\r\n\tnetworkSeries.dataFields.children = 'products';\r\n\r\n\tnetworkSeries.nodes.template.tooltipText = '{name}';\r\n\tnetworkSeries.nodes.template.fillOpacity = 1;\r\n\r\n\tnetworkSeries.nodes.template.label.text = '{name}';\r\n\tnetworkSeries.fontSize = 12;\r\n\tnetworkSeries.maxLevels = 4;\r\n\tnetworkSeries.maxRadius = am4core.percent(6);\r\n\tnetworkSeries.manyBodyStrength = -16;\r\n\tnetworkSeries.nodes.template.label.hideOversized = true;\r\n\tnetworkSeries.nodes.template.label.truncate = true;\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (!category.loading) {\r\n\t\t\t\tsetShow(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ category.loading ]\r\n\t);\r\n\r\n\t// console.log({ categoryList });\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<CRow>\r\n\t\t\t\t<CCol xs=\"12\">\r\n\t\t\t\t\t<CCard>\r\n\t\t\t\t\t\t<CRow style={{ background: '#67dcbb', borderRadius: '5px' }}>\r\n\t\t\t\t\t\t\t<CCol md={12}>\r\n\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '15px' }}>\r\n\t\t\t\t\t\t\t\t\t<h1 style={{ margin: '1rem', color: '#333' }}>Tous les Produits Disponibles</h1>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</CCol>\r\n\t\t\t\t\t\t</CRow>\r\n\r\n\t\t\t\t\t\t<CRow>\r\n\t\t\t\t\t\t\t<CCol md={12}>\r\n\t\t\t\t\t\t\t\t<div id=\"chartdiv\" />\r\n\t\t\t\t\t\t\t</CCol>\r\n\t\t\t\t\t\t</CRow>\r\n\t\t\t\t\t</CCard>\r\n\t\t\t\t</CCol>\r\n\t\t\t</CRow>\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default AllProduct;\r\n"],"sourceRoot":""}